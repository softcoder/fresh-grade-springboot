<html>
<link rel="stylesheet" type="text/css" href="css/main.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<body>
    <div class="header-container">
        <table class="table-center">
            <tr>
                <td>
                    <table class="table-center">
                    <tr>
                        <td>
                            <a href="/index.html" class="head-blue-left no-decor-link"><span class='left-arrow-blue'><</span>Menu</a>
                        </td>
                        <td>
                            <h1 class="head-black">Student List</h1>
                        </td>
                    </tr>
                    </table>
                </td>        
            </tr>
            <tr>
                <td>
                    <div class="container">
                    </div>
                </td>        
            </tr>
            <tr>
                <td>
                    <div class="student-container-black" id="student_div_x" name="student_div_x">
                        <table class="table-center" id="student_div" name="student_div">
                        </table>
                    </div>
                </td>        
            </tr>
        </table>
    </div>

<script>
function deleteStudent(student_id) {
    $.ajax({
        url: "/v1/student-manager/delete/"+student_id,
        type: "DELETE",
        success: function ( data ) {
            //debugger;
            $("#student_"+student_id).remove();
         },
         error: function (xhr, ajaxOptions, thrownError) {
            alert('Error Status: '+ xhr.status + ' message: ' + xhr.responseText);
         },
         cache: false
    });
}

$(document).ready(function() {
    $.ajax({
        url: "/v1/student-manager",
        success: function ( data ) {
            $.each(data,function(){
                $("#student_div").append("<tr id='student_"+this.id+"' name='student_"+this.id+"'>" + 
                "<td><a class='student-container-black no-decor-link' href='/view_student_detail.html?student_id="+this.id+"'>"+this.firstName+" "+this.lastName+"</a></td>"+
                "<td><a class='student-container-black right-arrow-gray no-decor-link' href='/view_student_detail.html?student_id="+this.id+"'>></a></td>"+
                "<td><a class='no-decor-link' href='#' onclick='deleteStudent("+this.id+"); return false;'><img class='delete-icon' title='Delete this student.' src='/images/delete-icon.png'></a></td></tr>");
            });
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert('Error Status: '+ xhr.status + ' message: ' + xhr.responseText);
        },
        cache: false
    });
});
</script>
</body>
</html>
